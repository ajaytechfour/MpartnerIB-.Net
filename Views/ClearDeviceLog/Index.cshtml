@model Luminous.EF.UserVerification
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="@Url.Content("~/assets/css/Formstyle.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/assets/js/jquery-1.10.2.js")" type="text/javascript"></script>


<script src="https://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/css/select2.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/js/select2.min.js"></script>
<style type="text/css">
    .required {
        color: Red;
    }

    table {
        border: 0;
        border-spacing: 0;
        font-size: 0.857em;
        margin: 10px 0;
        width: 100%;
    }

        table table {
            font-size: 1em;
        }

    #footer-wrapper table {
        font-size: 1em;
    }

    table tr th {
        background: #757575;
        background: rgba(0, 0, 0, 0.51);
        border-bottom-style: none;
    }

        table tr th, table tr th a, table tr th a:hover {
            color: #FFF;
            font-weight: bold;
        }

    table tbody tr th {
        vertical-align: top;
    }

    tr td, tr th {
        padding: 4px 9px;
        border: 1px solid #fff;
        text-align: left; /* LTR */
    }

    #footer-wrapper tr td, #footer-wrapper tr th {
        border-color: #555;
        border-color: rgba(255, 255, 255, 0.18);
    }

    tr.odd {
        background: #e4e4e4;
        background: rgba(0, 0, 0, 0.105);
    }

    tr, tr.even {
        background: #efefef;
        background: rgba(0, 0, 0, 0.063);
    }

    table ul.links {
        margin: 0;
        padding: 0;
        font-size: 1em;
    }

        table ul.links li {
            padding: 0 1em 0 0;
        }
</style>

<script type="text/javascript">
    $(document).ready(function () {

        $("#btnSearch").click(function () {

            var id = $("#Id").val();
            if (id == "")
            {
                alert("SAP Code cannot be blank")
                return true;
            }

            $.post("@Url.Content("~/ClearDeviceLog/getUserid")", { Id: id }, function (data) { SetGrid(data); }, "Json");


        });

    })

    function SetGrid(data) {
        console.log(data);
        var body = "";

        //$.each(data.result, function (key, value) {
        //    body += "<tr><td>" + value.Id + "</td>" + "<td>" + value.DeviceId + "</td></tr>";
        //});

        var get_obj_length = data.length;

        for (i = 0; i < get_obj_length; i++) {

            body += "<tr><td>" + data[i].Id + "</td>";
            body += "<td>" + data[i].DeviceId + "</td>";
            body += "<td><input type=checkbox name=myCheckbox checked  onclick=Edit('" + data[i].DeviceId + "') /></td></tr>";
        }
        $("#Grid tbody").html(body);

    }
    function Edit(deviceId) {
        var Id = $("#Id").val();
      
       // location.href = "@Url.Content("~/ClearDeviceLog/UserPermission/")" + { Id: id, Deviceid: deviceId }
        $.post("@Url.Content("~/ClearDeviceLog/UserPermission/")", { id: Id, deviceid: deviceId }, function (data) { }, "");
        alert('User Updated Successfully');
        location.href = '../../ClearDeviceLog/Index';
    }
</script>

<div id="form" style="margin-bottom: 11px">
    @using (Html.BeginForm("SavePermission", "ClearDeviceLog"))
    {
        <div id="content_wrap">
            <div class="msgbar msg_Info heading">
                Clear Device Log
            </div>
           
            <div class="content_main">
                <table id="GridView">
                    <tr>
                        <td style="width: 124px;">
                            Enter SAP Code <span class="required">*</span>
                        </td>
                        <td>
                            @Html.TextBox("Id", null, new { @class = "form-control", placeholder = "SAP Code" })
                            @Html.ValidationMessageFor(model => model.UserId)
                        </td>


                    </tr>
                    <tr>
                        <td></td>
                        <td><input type="button" id="btnSearch" value="Search" /></td>
                    </tr>

                </table>


            </div>
        </div>

    }
</div>
<div id="list" style="width: 997px; float: right; margin-right: 15px;">
    <table id="Grid" width="100%">
        <thead>
            <tr>
                <th>
                    ID
                </th>

                <th>
                    Device ID
                </th>
                <th>
                    Action
                </th>

            </tr>
        </thead>
        <tbody></tbody>
    </table>

</div>

