@using PagedList;
@using PagedList.Mvc;
@model  IPagedList<LuminousMpartnerIB.EF.ShowMarquee_Text>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_layout.cshtml";
}

<link href="@Url.Content("~/assets/css/jquery-ui.min.css")" rel="stylesheet" type="text/css" />
@*<script src="@Url.Content("~/assets/js/jquery-1.10.2.js")" type="text/javascript"></script>*@
<script src="@Url.Content("~/assets/js/jquery-ui.min.js")" type="text/javascript"></script>
@*<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.js"></script>*@

<script type="text/javascript">
    $(function () {
        $(".date").datepicker(
     { dateFormat: "dd-mm-yy" }
        );
        ValidationMessage();
    });

    function ValidationMessage() {
        if ('@ViewBag.StartDate' != "") {
            $("#sdate").text('@ViewBag.StartDate');
        }

        if ('@ViewBag.EndDate' != "") {
            $("#edate").text('@ViewBag.EndDate');
        }

        if ('@ViewBag.File' != "") {
            $("#file").text('@ViewBag.File');
        }
        if ('@ViewBag.SaveStatus' != "") {
            alert('@ViewBag.SaveStatus');
            location.href = "@Url.Content("~/MarqueeContest/Index")";
        }
        $("#stdate").val('@ViewBag.preStartDate');
        $("#etdate").val('@ViewBag.PreEndDate');

    }
</script>
<style type="text/css">
    .required {
        color: Red;
    }

    table {
        border: 0;
        border-spacing: 0;
        font-size: 0.857em;
        margin: 10px 0;
        width: 100%;
    }

        table table {
            font-size: 1em;
        }

    #footer-wrapper table {
        font-size: 1em;
    }

    table tr th {
        background: #757575;
        background: rgba(0, 0, 0, 0.51);
        border-bottom-style: none;
    }

        table tr th,
        table tr th a,
        table tr th a:hover {
            color: #FFF;
            font-weight: bold;
        }

    table tbody tr th {
        vertical-align: top;
    }

    tr td,
    tr th {
        padding: 4px 9px;
        border: 1px solid #fff;
        text-align: left; /* LTR */
    }

    #footer-wrapper tr td,
    #footer-wrapper tr th {
        border-color: #555;
        border-color: rgba(255, 255, 255, 0.18);
    }

    tr.odd {
        background: #e4e4e4;
        background: rgba(0, 0, 0, 0.105);
    }

    tr,
    tr.even {
        background: #efefef;
        background: rgba(0, 0, 0, 0.063);
    }

    table ul.links {
        margin: 0;
        padding: 0;
        font-size: 1em;
    }

        table ul.links li {
            padding: 0 1em 0 0;
        }
</style>
<script type="text/javascript">


    $(function () {
        $.post("@Url.Content("~/MarqueeContest/GetMarqueeDetail")", null, function (data) { SetGrid(data); }, "Json");
    });
    function SetGrid(data) {

        if (data == "Login") {
            location.href = "@Url.Content("~/Logout/Logout")";
        }
        else if (data == "snotallowed") {
            location.href = "@Url.Content("~/snotallowed/snotallowed")";
        }
        else {
            var body = "";
            $("#Grid tbody").empty();
            $.each(data.result, function (key, value) {
                var pagename = value.PageName;
                if (pagename == null || pagename == "") {
                    var PName = "";
                }
                else {
                    var PName = value.PageName;
                }

                body += "<tr><td>" + value.id + "</td>" +
             "<td>" + value.MarqueeText + "</td>" +
             "<td>" + value.startdate + "</td>" +
             "<td>" + value.enddate + "</td>" +
                 "<td>" + value.status + "</td>" +

            "<td><a style='cursor:pointer' onclick=Edit(" + value.id + ");><i class='fas fa-pencil-alt' style='font-size: 13px; color: #737373;'></i></a> <a style='cursor:pointer' onclick=Delete(" + value.id + ");><i class='fas fa-trash-alt' style='font-size:13px; color: #ff6c6c; margin-left: 10px;'></i></a></td></tr>";

            });
            $("#Grid tbody").append(body);
            SetPages(data.TotalRecord);

        }

    }
    function Delete(id) {
        if (confirm("Do You Want To Delete This Record")) {

            $.post("@Url.Content("~/MarqueeContest/Delete")", { id: id }, function (data) {
                $.post("@Url.Content("~/MarqueeContest/GetMarqueeDetail")", null, function (data) { SetGrid(data); }, "Json");

                alert(data);

            }, "Json");
        }
    }

    function Edit(id) {
        location.href = "@Url.Content("~/MarqueeContest/Edit/")" + id;
    }
    function SetPages(paging) {
        var pages = "";
        $("#Paging").empty();
        for (var i = 1; i <= parseInt(paging) ; i++) {
            pages += "<a style='cursor:pointer' onclick=GetPagesValues(" + i + ");> " + i + "  </a>";

        }
        $("#Paging").append("<u> Pages:-</u>" + pages);
    }


</script>


<div id="page-wrapper" style="background: #f2f4f8;">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="pageHeading"><span></span> Marquee</h1>
        </div>
    </div>

    @using (@Html.BeginForm("Save", "MarqueeContest", FormMethod.Post))
    {
        <div class="row">
            <div class="aos-init aos-animate" data-aos="fade-up" data-aos-duration="2500">
                <div class="addgift" style="padding-bottom: 10px;">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label> Marquee Text <span style="color: red;">*</span></label>
                                @Html.TextBoxFor(a => a.FirstOrDefault().Marqueetext, new { @class = "form-control" })
                                @Html.ValidationMessageFor(a => a.FirstOrDefault().Marqueetext, "", new { @class = "required" })
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Start Date<span style="color: red;">*</span></label>
                                <input id="stdate" type="text" class="date form-control" name="StartDate" />
                                <span id="sdate" class="required"></span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>End Date <span style="color: red;">*</span></label>
                                <input id="etdate" type="text" class="date form-control" name="EndDate" />
                                <span id="edate" class="required"></span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Status <span style="color: red;">*</span></label>
                                <input id="status" type="checkbox" checked="checked" name="Status" />
                                <span class="Status"></span>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <input type="submit" class="save-but-m submitBtn" value="Submit" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="aos-init aos-animate" data-aos="fade-up" data-aos-duration="2500">
                <div class="addgift" style="padding-bottom: 10px;">
                    <div class="row" id="list">
                        <table id="Grid" class="tabelGridRow2" style="width:100%; display:inline-table;">
                            <thead>
                                <tr>
                                    <th>
                                        ID
                                    </th>
                                    <th>
                                        Marquee Text
                                    </th>

                                    <th>
                                        Start Date
                                    </th>
                                    <th>
                                        End Date
                                    </th>
                                    <th>
                                        Status
                                    </th>
                                    <th style="text-align:right;">Action</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        <div id="Paging"></div>
                    </div>
                </div>
            </div>



        </div>
    }

    <div class="space30"></div>
    <div class="row">
        <div class="col-md-12">
            <div class="footerRow">
                © Copyright 2019 LuminousMpartnerIB | All Rights Reserved
            </div>
        </div>
    </div>
</div>

