@model LuminousMpartnerIB.EF.InsertContext
@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/Error.cshtml";
}
<link href="@Url.Content("~/assets/css/Formstyle.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/assets/css/jquery-ui.min.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/assets/js/jquery-1.10.2.js")" type="text/javascript"></script>
<script src="@Url.Content("~/assets/js/jquery-ui.min.js")" type="text/javascript"></script>

<style type="text/css">
    .required {
        color: Red;
    }

    table {
        border: 0;
        border-spacing: 0;
        font-size: 0.857em;
        margin: 10px 0;
        width: 100%;
    }

        table table {
            font-size: 1em;
        }

    #footer-wrapper table {
        font-size: 1em;
    }

    table tr th {
        background: #757575;
        background: rgba(0, 0, 0, 0.51);
        border-bottom-style: none;
    }

        table tr th,
        table tr th a,
        table tr th a:hover {
            color: #FFF;
            font-weight: bold;
        }

    table tbody tr th {
        vertical-align: top;
    }

    tr td,
    tr th {
        padding: 4px 9px;
        border: 1px solid #fff;
        text-align: left; /* LTR */
    }

    #footer-wrapper tr td,
    #footer-wrapper tr th {
        border-color: #555;
        border-color: rgba(255, 255, 255, 0.18);
    }

    tr.odd {
        background: #e4e4e4;
        background: rgba(0, 0, 0, 0.105);
    }

    tr,
    tr.even {
        background: #efefef;
        background: rgba(0, 0, 0, 0.063);
    }

    table ul.links {
        margin: 0;
        padding: 0;
        font-size: 1em;
    }

        table ul.links li {
            padding: 0 1em 0 0;
        }
</style>
<script type="text/javascript">









    $(function () {
        show();
        ValidationMessage();
        $("#DealerPhone").keyup(function (e) {
            var nameofbeneficiary = jQuery(e.currentTarget).val();
            myString = nameofbeneficiary.replace(/\D/g, '');
            var num = myString.substring(0, 10);
            $('#DealerPhone').val(num);
        });

    });
    //Get All States
    function show() {
        $.post("@Url.Content("~/ProductCategory/GetParentCategory")", null, function (data) { SetParentCategory(data); }, "Json");
        $.get("@Url.Content("~/state/Showstate")", null, function (data) { SetstateLoad(data); },
     "Json");
        $.get("@Url.Content("~/city/Showcity")", { id: '@ViewBag.stateid' }, function (data) { Setselectcity(data, 'CityId'); }, "Json");
        @*$.get("@Url.Content("~/state/Showstate")", null, function (data) { chk(data, "StateId"); })
        .error(function (data) { chk(data,"StateId"); });*@
    }
    function Setselectcity(data, id) {

        option = "";
        var procat = $("#CityId");
        procat.empty();
        procat.append("<option value=0>Select</option>");
        $.each(data, function (key, value) {

            option += "<option value=" + value.id + ">" + value.cityname + "</option>";


        });
        procat.append(option);
        if (id == "CityId") {
            $("#CityId").val('@ViewBag.cityid');
            // SetProdcutlevelOne();
        }
        else {
            procat.val('@ViewBag.cityid');
        }


    }
    function SetstateLoad(data) {

        option = "";
        var procat = $("#StateId");
        procat.empty();
        procat.append("<option value=0>Select</option>");
        $.each(data, function (key, value) {
            option += "<option value=" + value.id + ">" + value.statename + "</option>";

        });
        procat.append(option);

        if ('@ViewBag.stateid' != "") {

            $("#StateId").val('@ViewBag.stateid');

        }
    }

    function showCity() {

        var procat = $("#StateId :selected").val();

        // var procatLvlOne = $("#pclvlOne");
        $.get("@Url.Content("~/city/Showcity")", { id: procat }, function (data) { SetProdcutCategoryLoadPCC(data); },
     "Json");
        @*$.post("@Url.Content("~/ProductLevelOne/GetProductCategory")", { procatid: procat }, function (data) { SetProdcutCategory(data); }, "Json");*@


    }
    function SetProdcutCategoryLoadPCC(data) {

        option = "";
        var procat = $("#CityId");
        procat.empty();
        procat.append("<option value=0 >Select</option>");
        $.each(data, function (key, value) {
            option += "<option value=" + value.id + ">" + value.cityname + "</option>";

        });
        procat.append(option);
        if ('@ViewBag.cityid' != "") {

            $("#CityId").val('@ViewBag.cityid');
        }



    }
    function SetParentCategory(data) {
        option = "";
        var procat = $("#ParentCategory");
        procat.empty();
        procat.append("<option value=0>Select</option>");
        $.each(data, function (key, value) {

            option += "<option value=" + value.id + ">" + value.Name + "</option>";


        });
        procat.append(option);
        //ViewBag.Prntid = cud.ParentCatid;
        procat.val('@ViewBag.parentcatid');


    }
    //Fill City DropDown
    //City
    @*function showCity() {
            var statedValue = $("#StateId").val();
            $.get("@Url.Content("~/city/Showcity")", { id: statedValue }, function (data) { chk(data, "CityId"); })
        .error(function (data) { chk(data, "CityId"); });
        }*@
    //City
    function ValidationMessage() {

        if ('@ViewBag.File' != "") {
            $("#file").text('@ViewBag.File');
        }
        if ('@ViewBag.preStatus' == "1") {

            $("#Status").prop("checked", "checked");

        }
        if ('@ViewBag.Update' == "Done") {
            alert("Updation Done Successfully");
            location.href = "@Url.Content("~/Createcontest/Index")";
        }


    }

</script>

@using (@Html.BeginForm("Update", "Createcontest", FormMethod.Post, new { enctype = "multipart/form-data" }))
{

    <div id="content_wrap">
        <div class="msgbar msg_Info heading">Edit Contest</div>
        <div class="content_main">
            <div class="boxes1">



                <table style="width: 100%;">
                    <tr>
                        <td style="width: 137px;">
                            Parent Category <span style="color: red;">*</span>
                        </td>
                        <td>
                            <select name="ParentCatid" style="color: black" id="ParentCategory">
                                <option>Select</option>
                            </select>
                            <br />
                            @Html.ValidationMessageFor(a => a.ParentCategory, "", new { @class = "required" })
                        </td>
                        <td style="width: 137px;">
                            Dealer Name
                        </td>
                        <td>
                            @Html.HiddenFor(a => a.Id)
                            @Html.TextBox("DealerName", (string)ViewBag.Username, new { @readonly = "readonly" })<br />

                        </td>

                    </tr>

                    <tr>
                        <td style="width: 137px;">
                            Dealer Id
                        </td>
                        <td>
                            @Html.TextBox("DealerId", (string)ViewBag.Userid, new { @readonly = "readonly" })<br />

                        </td>
                        <td>
                            State <span style="color: red;">*</span>
                        </td>
                        <td>
                            <select id="StateId" name="stateName" onchange="showCity()">
                                <option value="0">Select</option>
                            </select>
                            <br />
                            @Html.ValidationMessageFor(a => a.DealerState, "", new { @class = "required" })
                        </td>

                    </tr>
                    <tr>
                        <td>
                            City
                        </td>
                        <td>
                            <select id="CityId" name="DealerCity">
                                <option value="0">Select</option>
                            </select>
                            @*<br />
                                @Html.ValidationMessageFor(a => a.FirstOrDefault().DealerCity, "", new { @class = "required" })*@
                        </td>
                        <td>
                            Dealer Phone <span style="color: red;">*</span>
                        </td>
                        <td>
                            @*@Html.EditorFor(a=>a.FirstOrDefault().Banner_Details)*@
                            @Html.EditorFor(a => a.DealerPhone)<br />
                            @Html.ValidationMessageFor(a => a.DealerPhone, "", new { @class = "required" })
                        </td>

                    </tr>
                    <tr>
                        <td>
                            Dealer Email
                        </td>
                        <td>
                            @*@Html.EditorFor(a=>a.FirstOrDefault().Banner_Details)*@
                            @Html.EditorFor(a => a.DealerEmail)<br />
                            @Html.ValidationMessageFor(a => a.DealerEmail, "", new { @class = "required" })
                        </td>
                        <td>
                            Distributor Code
                        </td>
                        <td>
                            @*@Html.EditorFor(a=>a.FirstOrDefault().Banner_Details)*@
                            @Html.EditorFor(a => a.DistributorCode)<br />
                            @Html.ValidationMessageFor(a => a.DistributorCode, "", new { @class = "required" })
                        </td>

                    </tr>
                    <tr>
                        <td>
                            Emp/FSE Code <span style="color: red;">*</span>
                        </td>
                        <td>
                            @*@Html.EditorFor(a=>a.FirstOrDefault().Banner_Details)*@
                            @Html.EditorFor(a => a.EmpCode)<br />
                            @Html.ValidationMessageFor(a => a.EmpCode, "", new { @class = "required" })
                        </td>
                        <td>
                            Emp/FSE Name<span style="color: red;">*</span>
                        </td>
                        <td>
                            @*@Html.EditorFor(a=>a.FirstOrDefault().Banner_Details)*@
                            @Html.EditorFor(a => a.FseName)<br />
                            @*@Html.ValidationMessageFor(a => a.FirstOrDefault().EmpCode, "", new { @class = "required" })*@
                        </td>



                    </tr>
                    <tr>
                        @if (Session["ASMEmpCode"] != null)
                        {
                            <td>
                                Dealer Firm Name<span style="color: red;">*</span>
                            </td>
                            <td>
                                @*@Html.EditorFor(a=>a.FirstOrDefault().Banner_Details)*@
                                @Html.EditorFor(a => a.DealerFirmName)<br />
                                @Html.ValidationMessageFor(a => a.DealerFirmName, "", new { @class = "required" })
                            </td>
                        }
                        else
                        {
                          
                        }
                        <td>
                            Status <span class="required">*</span>
                        </td>
                        <td>
                            <input id="Status" type="checkbox" name="Status" /><br />
                            <span class="Status"></span>
                        </td>

                    </tr>
                    <tr>
                        <td>
                            Upload Image <span class="required">*</span>
                        </td>
                        <td>
                            <input type="file" name="postedFile" />
                            <span id="file" class="required"></span>
                        </td>
                        <td>Previous Image</td>
                        <td>
                            <img src="@Url.Content("~/ProfileImages/")@Model.ImageEncode" title="@Model.ImageEncode" style="width:100px; height:100px" />
                        </td>
                    </tr>

                </table>

            </div>
            <input type="submit" class="SubmitButton" value="Submit" />
        </div>
    </div>




}
