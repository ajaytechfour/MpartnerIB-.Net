@model LuminousMpartnerIB.EF.Card_dynamicPage
@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="@Url.Content("~/assets/css/jquery-ui.min.css")" rel="stylesheet" type="text/css" />

<script src="@Url.Content("~/assets/js/jquery-ui.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/chosen.jquery.js")" type="text/javascript"></script>
<link href="@Url.Content("~/assets/css/chosen.css")" rel="stylesheet" type="text/css" />
<style type="text/css">
    .required {
        color: Red;
    }

    table {
        border: 0;
        border-spacing: 0;
        font-size: 0.857em;
        margin: 10px 0;
        width: 100%;
    }

        table table {
            font-size: 1em;
        }

    #footer-wrapper table {
        font-size: 1em;
    }

    table tr th {
        background: #757575;
        background: rgba(0, 0, 0, 0.51);
        border-bottom-style: none;
    }

        table tr th, table tr th a, table tr th a:hover {
            color: #FFF;
            font-weight: bold;
        }

    table tbody tr th {
        vertical-align: top;
    }

    tr td, tr th {
        padding: 4px 9px;
        border: 1px solid #fff;
        text-align: left; /* LTR */
    }

    #footer-wrapper tr td, #footer-wrapper tr th {
        border-color: #555;
        border-color: rgba(255, 255, 255, 0.18);
    }

    tr.odd {
        background: #e4e4e4;
        background: rgba(0, 0, 0, 0.105);
    }

    tr, tr.even {
        background: #efefef;
        background: rgba(0, 0, 0, 0.063);
    }

    table ul.links {
        margin: 0;
        padding: 0;
        font-size: 1em;
    }

        table ul.links li {
            padding: 0 1em 0 0;
        }
</style>
<style>
    .FullDes {
        position: relative;
        background-color: #1D1D1D;
        width: 245px;
        color: white;
        border: 1px solid black;
        display: none;
    }
</style>
<script type="text/javascript">
    $(function () {
        @*$.post("@Url.Content("~/ProductCategory/GetParentCategory")", null, function (data) { SetParentCategory(data); }, "Json");*@
        @*$.post("@Url.Content("~/CreatePermotionPrice_New/GetContactDetail")", null, function (data) { SetGrid(data); }, "Json");*@
        $.post("@Url.Content("~/CreatePermotionScheme_New/GetCardProvider")", null, function (data) { SetCardGrid(data); }, "Json");
        $.post("@Url.Content("~/Destributor/GetRegions")", null, function (data) { SetProdcutCategory(data, 'RegionList'); },
        "Json");
        $.post("@Url.Content("~/Dealers/GetAllDestributors")", null, function (data) { SetProdcutCategory(data, 'DestributorList'); }, "Json");
        $.post("@Url.Content("~/Dealers/GetAllDealer")", null, function (data) { SetProdcutCategory(data, 'DealerList'); }, "Json");
        $(".date").datepicker(
     { dateFormat: "dd-mm-yy" }
        );
        ValidationMessage();
    });

</script>
<script type="text/javascript">
    function ValidationMessage() {
        if ('@ViewBag.StartDate' != "") {
            $("#sdate").text('@ViewBag.StartDate');
        }

        if ('@ViewBag.EndDate' != "") {
            $("#edate").text('@ViewBag.EndDate');
        }

        if ('@ViewBag.File' != "") {
            $("#file").text('@ViewBag.File');
        }


        if ('@ViewBag.Providerid' != "") {
            $("#Ctype").text('@ViewBag.Providerid');
        }
        if ('@ViewBag.SaveStatus' != "") {
            alert('@ViewBag.SaveStatus');
            location.href = "@Url.Content("~/CreatePermotionScheme_New/Index")";
        }
        $("#sdate").val('@ViewBag.preStartDate');
        $("#edate").val('@ViewBag.PreEndDate');

    }
</script>
<script type="text/javascript">


    @*function SetGrid(data) {
        var body = "";
        $("#Grid tbody").empty();
        $.each(data, function (key, value) {
            var Description = value.Descriptions.toString();;
            var shorDescriptions = Description.substring(0, 10);
            body += "<tr><td> PLI" + value.id + "</td>" +
                 "<td>" + value.ParntCat + "</td>" +
                "<td>" + value.ProCatTwo + "</td>" +
                "<td>" + value.PCat + "</td>" +
            "<td>" + value.proCatOne + "</td>" +


            "<td><div style='Position:absolute;cursor:pointer'> <span class='Des' onmouseout='hideFullDescription(this);' onmouseover='showFullDescription(this);'>" + shorDescriptions + "</span><div style='position:relative;' class='FullDes'>" + Description + "</div></div></td>" +
             "<td>" + value.StartDate + "</td>" +
             "<td>" + value.EndDate + "</td>" +
             "<td>" + value.status + "</td>" +

            "<td> <a style='cursor:pointer' onclick=Detail(" + value.id + ");>Detail</a> <a style='cursor:pointer' onclick=Edit(" + value.id + ");>Edit</a> <a style='cursor:pointer' onclick=Delete(" + value.id + ");>Delete</a></td></tr>";
            debugger;
        });
        $("#Grid tbody").append(body);
        SetPages('@TempData["paging"]')

    }*@
    function Edit(id) {
        location.href = "@Url.Content("~/CreatePermotionScheme_New/Edit/")" + id;
    }
    function showFullDescription(currentTag) {
        $(currentTag).parent().find(".FullDes").show();
    }
    function hideFullDescription(currentTag) {
        $(currentTag).parent().find(".FullDes").hide();
    }
    function SetProdcutCategory(data, id) {
        option = "";
        var procat = $("#" + id);
        procat.empty();
        procat.append("<option value=0>@LuminousMpartnerIB.Resource.Select</option>");
        $.each(data, function (key, value) {
            option += "<option value=" + value.id + ">" + value.Name + "</option>";

        });
        procat.append(option);



    }

    //Set Card Grid//
    function SetCardGrid(data) {
        if (data == "Login") {
            location.href = "@Url.Content("~/Logout/Logout")";
        }
        else if (data == "snotallowed") {
            location.href = "@Url.Content("~/snotallowed/snotallowed")";
        }
        else {
            option = "";
            var procat = $("#Ctype");
            procat.empty();
            procat.append("<option value=0>Select</option>");
            $.each(data, function (key, value) {
                option += "<option value=" + value.id + ">" + value.Name + "</option>";

            });
            procat.append(option);
            procat.val('@ViewBag.Providerid');
        }
    }

</script>
<script type="text/javascript">
    function Alls() {
        if ($("#All").is(":checked")) {
            $("#region").attr("disabled", true);
            $("#destributor").attr("disabled", true);
            $("#Dealer").attr("disabled", true);
            $("#RegionList_chosen").hide();
            $("#DestributorList_chosen").hide();
            $("#DealerList_chosen").hide();
        }
        else {
            $("#region").attr("disabled", false);
            $("#destributor").attr("disabled", false);
            $("#Dealer").attr("disabled", false);
            $("#RegionList_chosen").show();
            $("#DestributorList_chosen").show();
            $("#DealerList_chosen").show();
        }

    }


    function GetRegions() {
        if ($("#region").is(":checked")) {

            $.post("@Url.Content("~/Destributor/GetRegions")", null, function (data) { SetProdcutCategory(data, 'RegionList'); },
                 "Json");
            $("#RegionList_chosen").show();

        }
        else {
            $("#RegionList_chosen").hide();
        }

    }
    function GetDestributor() {
        if ($("#destributor").is(":checked")) {
            if ($("#region").is(":checked")) {
                SetDestributor();

            }
            else {
                $.post("@Url.Content("~/Dealers/GetAllDestributors")", null, function (data) { SetProdcutCategory(data, 'DestributorList'); }, "Json");
            }
            $("#DestributorList_chosen").show();
        }
        else {

            $("#DestributorList_chosen").hide();
        }
    }
    function GetDealer() {
        if ($("#Dealer").is(":checked")) {
            if ($("#destributor").is(":checked")) {
                SetDealer();
            }
            else {

                $.post("@Url.Content("~/Dealers/GetAllDealer")", null, function (data) { SetProdcutCategory(data, 'DealerList'); }, "Json");
            }
            $("#DealerList_chosen").show();
        }
        else {

            $("#DealerList_chosen").hide();
        }
    }
    function SetProdcutCategory(data, id) {
        option = "";
        var procat = $("#" + id);
        procat.empty();
        procat.append("<option value=0>Select</option>");
        $.each(data, function (key, value) {
            option += "<option value=" + value.id + ">" + value.Name + "</option>";

        });
        procat.append(option);
        procat.chosen({ width: "100px" });
        procat.trigger("chosen:updated");
        if ($("#region").is(":checked")) {
            $("#RegionList_chosen").show();
        }
        else {
            $("#RegionList_chosen").hide();
        }

        if ($("#destributor").is(":checked")) {
            $("#DealerList_chosen").show();
        }
        else {
            $("#DestributorList_chosen").hide();
        }

        if ($("#Dealer").is(":checked")) {
            $("#DealerList_chosen").show();
        }
        else {
            $("#DealerList_chosen").hide();
        }
    }

    function SetRegion() {
        $("#RgList").val($("#RegionList").val());
        var regionlist = $("#RgList").val();

        $.post("@Url.Content("~/Dealers/GetDestributorsByMultiPleids")", { RegionId: regionlist }, function (data) { SetProdcutCategory(data, 'DestributorList'); }, "Json");
    }
    function SetDestributor() {
        $("#disList").val($("#DestributorList").val());

        var regionlist = $("#disList").val();

        $.post("@Url.Content("~/Dealers/GetAllDealerByMultiPleIds")", { RegionId: regionlist }, function (data) { SetProdcutCategory(data, 'DealerList'); }, "Json");
    }
    function SetDealer() {
        $("#Dealist").val($("#DealerList").val());
    }

</script>

<script type="text/javascript">

    $(function () {

        $("#title_colour").click(function () {
            window.open('https://htmlcolorcodes.com/color-picker/');
        })

        $("#subtitle_colour").click(function () {
            window.open('https://htmlcolorcodes.com/color-picker/');
        })

    });
</script>

<script type="text/javascript">

    $(document).ready(function () {

        $("#hex1Titlecolor, #hex2subtitlecolor").change(function () {

            var regExp = new RegExp("^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$");
            var text1 = $("#hex1Titlecolor").val();
            var text2 = $("#hex2subtitlecolor").val();

            if ($("#hex1Titlecolor").val() != '') {
                if (regExp.test(text1)) {
                    $("#lblmessagehex1price").hide();
                }
                else {
                    $("#lblmessagehex1price").show();
                    $("#lblmessagehex1price").text("Please Enter a Valid Hex Code");
                    $("#hex1Titlecolor").val('');
                }

            }

            if ($("#hex2subtitlecolor").val() != '') {
                if (regExp.test(text2)) {
                    $("#lblmessagehex2price").hide();
                }
                else {
                    $("#lblmessagehex2price").show();
                    $("#lblmessagehex2price").text("Please Enter a Valid Hex Code");
                    $("#hex2subtitlecolor").val('');
                }
            }

        });

    });

</script>
<script type="text/javascript">

    $(document).ready(function () {
        $("#btnsubmit").click(function () {

            debugger;

            if ($('#Ctype').val() == 0 || $('#Ctype option:selected').val() == 0) {
                $("#lblmessagesubmit").text("Please fill all the fields");
                return false;
            }
            if ($("#txttitle").val() == "") {
                $("#lblmessagesubmit").text("Please fill all the fields");
                return false;
            }
            if ($("#hex1Titlecolor").val() == "") {
                $("#lblmessagesubmit").text("Please fill all the fields");
                return false;
            }
            if ($("#txtsubtitle").val() == "") {
                $("#lblmessagesubmit").text("Please fill all the fields");
                return false;
            }
            if ($("#hex2subtitlecolor").val() == "") {
                $("#lblmessagesubmit").text("Please fill all the fields");
                return false;
            }

            //if ($('#file_headerimage').length == 0 || $('#file_headerimage').val() == '') {
            //    $("#lblmessagesubmit").text("Please fill all the fields");
            //    return false;
            //}

            //if ($('#file_mainimage').length == 0 || $('#file_mainimage').val() == '') {
            //    $("#lblmessagesubmit").text("Please fill all the fields");
            //    return false;
            //}

            if ($("#sdate").val() == "") {
                $("#lblmessagesubmit").text("Please fill all the fields");
                return false;
            }
            if ($("#edate").val() == "") {
                $("#lblmessagesubmit").text("Please fill all the fields");
                return false;
            }
            if (Date.parse($("#edate").val()) <= Date.parse($("#sdate").val())) {//compare end <=, not >=
                $("#lblmessagesubmit").text("End date should be greater or equal to Start Date");
                return false;
            }
        });

    });

</script>

<script type="text/javascript">

    $(function () {

        var _URL = window.URL || window.webkitURL;
        var imgwidth = "";
        var imgheight = "";

        $("#file_headerimage").change(function () {

            var file_size = (this.files[0].size);

            if ($("#file_headerimage").val() != '' && $("#file_headerimage").length != 0) {
                if ($("#file_headerimage").length != 0 && file_size > 4000) {
                    $(".h_file_error").html("File size should not be greater than 4 KB");
                    $("#file_headerimage").val('');
                    return false;

                }
                else {
                    if ((file = this.files[0])) {
                        img = new Image();
                        img.onload = function () {
                            imgwidth = this.width;
                            imgheight = this.height;

                            if (imgwidth == 700 && imgheight == 151) {
                                $(".h_file_error").html("");
                                return true;
                            }
                            else {
                                $(".h_file_error").html("Dimension should be 700*151");
                                $("#file_headerimage").val('');
                                return false;
                            }

                        };
                        img.src = _URL.createObjectURL(file);
                    }
                }
            }
        });

        $("#file_mainimage").change(function () {

            var file_size = (this.files[0].size);

            if ($("#file_mainimage").val() != '' && $("#file_mainimage").length != 0) {
                if ($("#file_mainimage").length != 0 && file_size > 50000) {
                    $(".m_file_error").html("File size should not be greater than 50 KB");
                    $("#file_mainimage").val('');
                    return false;

                }
                else {
                    if ((file = this.files[0])) {
                        img = new Image();
                        img.onload = function () {
                            imgwidth = this.width;
                            imgheight = this.height;

                            if (imgwidth == 500 && imgheight == 500) {
                                $(".m_file_error").html("");
                                return true;
                            }
                            else {
                                $(".m_file_error").html("Dimension should be 500*500");
                                $("#file_mainimage").val('');
                                return false;
                            }

                        };
                        img.src = _URL.createObjectURL(file);
                    }
                }
            }
        });

    });


</script>


<div id="page-wrapper" style="background: #f2f4f8;">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="pageHeading"><span>@LuminousMpartnerIB.Resource.Schemes - </span>@LuminousMpartnerIB.Resource.Edit @LuminousMpartnerIB.Resource.Schemes</h1>
        </div>
    </div>
    <div id="form" style="margin-bottom: 11px">
        @using (Html.BeginForm("Update", "CreatePermotionScheme_New", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {

            <div class="row" id="GridView">
                <div class="aos-init aos-animate" data-aos="fade-up" data-aos-duration="2500">
                    <div class="addgift" style="padding-bottom: 10px;">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>@LuminousMpartnerIB.Resource.CardType<span class="required">*</span></label>
                                    <select name="Ctype" id="Ctype" class="form-control">
                                        <option>@LuminousMpartnerIB.Resource.Select</option>
                                    </select>
                                    @Html.HiddenFor(a => a.Id)
                                    <br />
                                    @Html.ValidationMessageFor(a => a.CardProviderId, "", new { @class = "required" })
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="aos-init aos-animate" data-aos="fade-up" data-aos-duration="2500">
                    <div class="addgift" style="padding-bottom: 10px;">
                        <h2>@LuminousMpartnerIB.Resource.Header</h2>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>@LuminousMpartnerIB.Resource.Title<span class="required">*</span></label>
                                    @Html.TextBoxFor(a => a.Title, new { @class = "form-control", id = "txttitle", @placeholder = @LuminousMpartnerIB.Resource.EnterTitle })
                                    <br />
                                    @Html.ValidationMessageFor(a => a.Title, "", new { @class = "required" })
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>@LuminousMpartnerIB.Resource.TitleColour<span class="required">*</span></label>
                                    @Html.TextBoxFor(a => a.TitleColour, new { @class = "form-control", id = "hex1Titlecolor", @placeholder = @LuminousMpartnerIB.Resource.Hex_Code })
                                    <i style="font-size:11px; font-style:normal;"><a id="title_colour">@LuminousMpartnerIB.Resource.ReferenceforHexCode</a></i>
                                    <label id="lblmessagehex1price" style=" font-size: 11px; color: red; position: absolute; top: 62px; left: 137px;"></label>
                                    <br />
                                    @Html.ValidationMessageFor(a => a.TitleColour, "", new { @class = "required" })
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>@LuminousMpartnerIB.Resource.SubTitle<span class="required">*</span></label>
                                    @Html.TextBoxFor(a => a.Sub_Title, new { @class = "form-control", id = "txtsubtitle", @placeholder = @LuminousMpartnerIB.Resource.SubTitle })
                                    <br />
                                    @Html.ValidationMessageFor(a => a.Sub_Title, "", new { @class = "required" })
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>@LuminousMpartnerIB.Resource.SubTitleColour<span class="required">*</span></label>
                                    @Html.TextBoxFor(a => a.Sub_TitleColour, new { @class = "form-control", id = "hex2subtitlecolor", @placeholder = @LuminousMpartnerIB.Resource.Hex_Code })
                                    <i style="font-size:11px; font-style:normal;"><a id="subtitle_colour">@LuminousMpartnerIB.Resource.ReferenceforHexCode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></i><br />
                                    <br /><label id="lblmessagehex2price" style=" font-size: 11px; color: red; position: absolute; top: 82px; left: 14px;"></label>
                                    @Html.ValidationMessageFor(a => a.Sub_TitleColour, "", new { @class = "required" })
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>@LuminousMpartnerIB.Resource.UploadHeaderImages<span class="required">*</span></label>
                                    <label for="file_headerimage" class="btn" style="display:block;padding:5px; border:1px solid #ccc; width:50%;">@LuminousMpartnerIB.Resource.SelectImage</label>
                                    <input type="file" id="file_headerimage" name="header_image" style="height: inherit; visibility:hidden; border: none;" />
                                    <i style="font-size:11px; font-style:normal;">(@LuminousMpartnerIB.Resource.Dimension-700*151  @LuminousMpartnerIB.Resource.Size- 4kb)</i><br />
                                    <span class="h_file_error" style="color:red;font-size:11px;"></span>
                                    <br />
                                    <label style="display: block; width: 100%; display: block; width: 100%; position: absolute; left: 269px; top: 5px;">@LuminousMpartnerIB.Resource.PreviousImage</label>
                                    <img src="@Url.Content("~/MpartnerIB_Api/CardImage/")@ViewBag.HeaderImageName" style="height: 100px; width: 200px; position: absolute; left: 399px; top: -16px; " />
                                    @Html.ValidationMessageFor(a => a.ImageSystemName, "", new { @class = "required" })
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="aos-init aos-animate" data-aos="fade-up" data-aos-duration="2500">
                    <div class="addgift" style="padding-bottom: 10px;">
                        <h2>@LuminousMpartnerIB.Resource.Main</h2>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>@LuminousMpartnerIB.Resource.UploadMainImages<span class="required">*</span></label>
                                    <label for="file_mainimage" class="btn" style="display:block;padding:5px; border:1px solid #ccc; width:50%;">@LuminousMpartnerIB.Resource.SelectImage</label>
                                    <input type="file" id="file_mainimage" name="main_image" class="form-control" style="border:none;visibility:hidden; height:inherit;" />
                                    <i style="font-size:11px; font-style:normal;">(@LuminousMpartnerIB.Resource.Dimension-500*500  @LuminousMpartnerIB.Resource.Size- 50kb)</i>
                                    <span class="m_file_error" style=" color:red;font-size:11px;"></span>
                                    <br />
                                    <label style="display:block; width:100%;">@LuminousMpartnerIB.Resource.PreviousImage</label>
                                    <img src="@Url.Content("~/MpartnerIB_Api/CardImage/")@ViewBag.MainImageName" style="height: 100px; width: 70%;" />
                                    @Html.ValidationMessageFor(a => a.ImageSystemName, "", new { @class = "required" })
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>@LuminousMpartnerIB.Resource.StartDate<span class="required">*</span></label>
                                    <input id="sdate" type="text" class="date form-control" placeholder="dd-mm-yyyy" autocomplete="off" name="StartDate" />
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>@LuminousMpartnerIB.Resource.EndDate<span class="required">*</span></label>
                                    <input id="edate" type="text" class="date form-control" placeholder="dd-mm-yyyy" autocomplete="off" name="EndDate" />
                                    <br />
                                    @Html.ValidationMessageFor(a => a.Enddate, "", new { @class = "required" })
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>@LuminousMpartnerIB.Resource.UploadPDF</label>
                                    <label for="pdf" class="btn" style="display:block;padding:5px; border:1px solid #ccc; width:50%;">@LuminousMpartnerIB.Resource.Select</label>
                                    <input type="file" id="pdf" name="Pdf_file" style="border:none;visibility:hidden; height:inherit;" />
                                    <br />

                                </div>
                            </div>
                            <div class="col-md-4">
                                @*<div class="form-group">
                                                            <label>Permission For</label>
                                                            @{
                                    int id = Convert.ToInt32(Model.Id);
                                    <a href="/EditPromotion_Price_Permission/Index/@id">Edit Permission</a>
                                                            }
                                                        </div>*@
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>@LuminousMpartnerIB.Resource.Status</label>
                                    <input type="checkbox" checked="checked" name="statusC" style="height:inherit;" />
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="col-md-12" style=" margin-top: 15px;">
                    <input type="submit" id="btnsubmit" value=@LuminousMpartnerIB.Resource.Submit class="submitBtn" />
                    <label id="lblmessagesubmit" style="font-size: 16px; color:red;"></label>
                </div>

            </div>


        }
    </div>
    <div class="space30"></div>
    <div class="row">
        <div class="col-md-12">
            <div class="footerRow">
                © Copyright 2019 LuminousMpartnerIB | All Rights Reserved
            </div>
        </div>
    </div>
</div>