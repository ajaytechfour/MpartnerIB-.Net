@model IEnumerable<LuminousMpartnerIB.EF.GetAlertNotificationAccessTable_Result>

@{
    ViewBag.Title = "EditReciverList";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@*<link href="@Url.Content("~/assets/css/Formstyle.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/assets/js/jquery-1.10.2.js")" type="text/javascript"></script>*@
<link href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/css/bootstrap.min.css"
      rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script>
<link href="http://cdn.rawgit.com/davidstutz/bootstrap-multiselect/master/dist/css/bootstrap-multiselect.css"
      rel="stylesheet" type="text/css" />
<script src="http://cdn.rawgit.com/davidstutz/bootstrap-multiselect/master/dist/js/bootstrap-multiselect.js"
        type="text/javascript"></script>
<script src="@Url.Content("~/assets/js/jquery-ui.min.js")" type="text/javascript"></script>
<link href="@Url.Content("~/assets/css/jquery-ui.min.css")" rel="stylesheet" type="text/css" />

<script src="@Url.Content("~/Scripts/Permission.js")" type="text/javascript"></script>
<script>
    $(function () {


        $.post("@Url.Content("~/Destributor/GetRegions")", null, function (data) { SetProdcutCategory(data, 'RegionList'); },
       "Json");

    });
    function SetProdcutCategory(data, id) {
        if (data == "Login") {
            location.href = "@Url.Content("~/Logout/Logout")";
        }
        else if (data == "snotallowed") {
            location.href = "@Url.Content("~/snotallowed/snotallowed")";
        }
        else {
            option = "";
            var procat = $("#" + id);
            procat.empty();
            procat.append("<option value=0 disabled='disabled'>Select</option>");
            $.each(data, function (key, value) {
                option += "<option value=" + value.id + ">" + value.Name + "</option>";

            });
            procat.append(option);
            procat.multiselect({
                nonSelectedText: 'Select Region!',
                includeSelectAllOption: true,
                enableFiltering: true,
                maxHeight: 200,
                buttonWidth: 120,
                enableClickableOptGroups: true,
                enableCollapsibleOptGroups: true
            });
        }

    }
</script>
<style>
    table.permissionTbl tr{float:inherit;}
</style>

<div id="page-wrapper" style="background: #f2f4f8;">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="pageHeading"><span></span>Alert Notification</h1>
        </div>
    </div>

    @using (@Html.BeginForm("SavePermission", "AlertNotification"))
    {

        <div class="row">
            <div class="aos-init aos-animate" data-aos="fade-up" data-aos-duration="2500" id="content_wrap">
                <div class="addgift" style="padding-bottom: 10px;">
                    <div class="row">
                        <div class="col-md-12">

                            <div id="GridView">
                                <div class="col-md-12">
                                    <h2 style="font-size: 18px; border-bottom: 2px solid #eee;">Selected Permission</h2>
                                    <table class="permissionTbl">
                                        <tr>
                                            <td>All</td>
                                            <td>Region</td>
                                            <td>Distributor</td>
                                            <td>Dealer</td>
                                        </tr>
                                        @foreach (var a in Model)
                                        {
                                            <tr>
                                                <td>

                                                    @{
                                            bool all = a.AllAcess ?? false;
                                            <input type="checkbox" disabled="disabled" checked="@all" />

                                                    }
                                                </td>
                                                <td>
                                                    @{
                                            string region;
                                            try
                                            {
                                                region = a.RegionName;
                                            }
                                            catch (NullReferenceException ex)
                                            {
                                                region = "";
                                            }
                                            if (region == "")
                                            {
                                                region = "*";
                                            }
                                            <text> @region </text>
                                                    }
                                                </td>
                                                <td>
                                                    @{
                                            bool Destri = a.AllDestriAccess ?? false;
                                            <input type="checkbox" disabled="disabled" checked="@Destri" />
                                                    }
                                                </td>
                                                <td>
                                                    @{
                                            bool Dealer = a.AllDealerAccess ?? false;
                                            <input type="checkbox" disabled="disabled" checked="@Dealer" />
                                                    }
                                                </td>
                                            </tr>
                                        }

                                    </table>
                                </div>
                            </div>

                            <div id="GridView">
                                <div class="col-md-12">
                                    <h2 style="margin-top: 30px; font-size: 18px; border-bottom: 2px solid #eee;">Permission For<span class="required">*</span></h2>
                                    <table class="permissionTbl">
                                        <tr>
                                            <td>All</td>
                                            <td>Region</td>
                                            <td>Distributor</td>
                                            <td>Dealer</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <input type="checkbox" name="Alls" onchange="Allch();" id="All" />
                                            </td>
                                            <td valign="top">
                                                <select id="RegionList" onchange="SetRegion();" multiple="multiple"  style="display: none; color: black;"></select>
                                                <input type="hidden" id="RgList" name="rglist" class="form-control" />

                                            </td>
                                            <td valign="top">
                                                <input type="checkbox" id="checkDistri" name="DistriCheck" />
                                            </td>
                                            <td valign="top">
                                                <input type="checkbox" id="checkDeal" name="DealCheck" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">
                                                @Html.ValidationMessageFor(a => a.FirstOrDefault().AllAcess, "", new { @class = "required" })
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <input type="submit" value="Submit" class="submitBtn" style="margin:10px 0 20px 0; " />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
    <div class="space30"></div>
    <div class="row">
        <div class="col-md-12">
            <div class="footerRow">
                © Copyright 2019 LuminousMpartnerIB | All Rights Reserved
            </div>
        </div>
    </div>

</div>

