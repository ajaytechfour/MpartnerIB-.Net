@model LuminousMpartnerIB.EF.Notification
@{
    ViewBag.Title = "Notification";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link href="http://cdn.rawgit.com/davidstutz/bootstrap-multiselect/master/dist/css/bootstrap-multiselect.css"
      rel="stylesheet" type="text/css" />
<script src="http://cdn.rawgit.com/davidstutz/bootstrap-multiselect/master/dist/js/bootstrap-multiselect.js"
        type="text/javascript"></script>
@*<link href="@Url.Content("~/assets/css/Formstyle.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/assets/js/jquery-1.10.2.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/assets/js/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>*@

<style type="text/css">
    .required {
        color: Red;
    }

    table {
        border: 0;
        border-spacing: 0;
        font-size: 0.857em;
        margin: 10px 0;
        width: 100%;
    }

        table table {
            font-size: 1em;
        }

    #footer-wrapper table {
        font-size: 1em;
    }

    table tr th {
        background: #757575;
        background: rgba(0, 0, 0, 0.51);
        border-bottom-style: none;
    }

        table tr th, table tr th a, table tr th a:hover {
            color: #FFF;
            font-weight: bold;
        }

    table tbody tr th {
        vertical-align: top;
    }

    tr td, tr th {
        padding: 4px 9px;
        border: 1px solid #fff;
        text-align: left; /* LTR */
    }

    #footer-wrapper tr td, #footer-wrapper tr th {
        border-color: #555;
        border-color: rgba(255, 255, 255, 0.18);
    }

    tr.odd {
        background: #e4e4e4;
        background: rgba(0, 0, 0, 0.105);
    }

    tr, tr.even {
        background: #efefef;
        background: rgba(0, 0, 0, 0.063);
    }

    table ul.links {
        margin: 0;
        padding: 0;
        font-size: 1em;
    }

        table ul.links li {
            padding: 0 1em 0 0;
        }
</style>


<script type="text/javascript">
    $(function () {
        //$("#DestributorList").chosen({ width: "100px" });
        //$("#DealerList").chosen({ width: "100px" });
        //ValidationMessage();
        $.post("@Url.Content("~/Destributor/GetRegions")", null, function (data) { SetProdcutCategory(data, 'RegionList'); },
        "Json");
        $.post("@Url.Content("~/Notifications/GetNotificationsDetail")", null, function (data) { SetGrid(data); }, "Json");
    });
    function SetGrid(data) {
        if (data == "Login") {
            location.href = "@Url.Content("~/Logout/Logout")";
        }
        else if (data == "snotallowed") {
            location.href = "@Url.Content("~/snotallowed/snotallowed")";
        }
        else {
            var body = "";
            $("#Grid tbody").empty();
            $.each(data.result, function (key, value) {


                body += "<tr><td> " + value.id + "</td>" +
                "<td>" + value.Subject + "</td>" +
                "<td>" + value.Text + "</td>" +
            //"<td>" + value.status + "</td>" +
                               "<td><img src=" + "@Url.Content("~/NotificationImage/")" + value.Imagepath + " style='height: 52px;width: 53px;' /> </td></tr>";

            //"<td> <a style='cursor:pointer' onclick=Edit(" + value.id + ");>Edit</a> <a style='cursor:pointer' onclick=Delete(" + value.id + ");>Delete</a></td></tr>";
                debugger;
            });
            $("#Grid tbody").append(body);
            SetPages(data.TotalRecord);
        }
    }
    function SetPages(paging) {
        var pages = "";
        $("#Paging").empty();
        for (var i = 1; i <= parseInt(paging) ; i++) {
            pages += "<a style='cursor:pointer' onclick=GetPagesValues(" + i + ");> " + i + "  </a>";

        }
        $("#Paging").append("<u> Pages:-</u>" + pages);
    }
    function GetPagesValues(id) {
        $.post("@Url.Content("~/Notifications/GetNotificationsDetail")", { page: id }, function (data) { SetGrid(data); }, "Json");
    }
    function Edit(id) {
        location.href = "@Url.Content("~/Notifications/Edit/")" + id;
    }


    function Delete(id) {
        if (confirm("Do You Want To Delete This Record")) {
            $.post("@Url.Content("~/Notifications/DeleteNotification")", { id: id }, function (data) {
                if (data == "Login") {
                    location.href = "@Url.Content("~/Logout/Logout")";
                }
                else if (data == "snotallowed") {
                    location.href = "@Url.Content("~/snotallowed/snotallowed")";
                }
                else {

                    $.post("@Url.Content("~/Notifications/GetNotificationsDetail")", null, function (data) { SetGrid(data); }, "Json");
                    alert(data);
                }


            }, "Json");
        }
    }
</script>
@* Permisson For Script *@
<script type="text/javascript">
    function Allst() {
        if ($("#All").is(":checked")) {
            $("#region").attr("disabled", true);
            $("#destributor").attr("disabled", true);
            $("#userupload_file").attr("disabled", true);
            $("#Dealer").attr("disabled", true);
            //$("#RegionList_chosen").hide();
            //$("#DestributorList_chosen").hide();
            //$("#DealerList_chosen").hide();
            $("#checkDistri").hide();
            $("#checkDeal").hide();
        }
        else {
            $("#region").attr("disabled", false);
            $("#destributor").attr("disabled", false);
            $("#userupload_file").attr("disabled", false);
            $("#Dealer").attr("disabled", false);
            //$("#RegionList_chosen").show();
            //$("#DestributorList_chosen").show();
            //$("#DealerList_chosen").show();
            $("#checkDistri").show();
            $("#checkDeal").show();
        }

    }


    function GetRegions() {
        if ($("#region").is(":checked")) {

            $.post("@Url.Content("~/Destributor/GetRegions")", null, function (data) { SetProdcutCategory(data, 'RegionList'); },
                 "Json");
            //$("#RegionList_chosen").show();

        }
        else {
            $("#RegionList_chosen").hide();
        }

    }
    function GetDestributor() {
        if ($("#destributor").is(":checked")) {
            if ($("#region").is(":checked")) {
                SetDestributor();

            }
            else {
                $.post("@Url.Content("~/Dealers/GetAllDestributors")", null, function (data) { SetProdcutCategory(data, 'DestributorList'); }, "Json");
            }
            //$("#DestributorList_chosen").show();
        }
        else {

            $("#DestributorList_chosen").hide();
        }
    }
    function GetDealer() {
        if ($("#Dealer").is(":checked")) {
            if ($("#destributor").is(":checked")) {
                SetDealer();
            }
            else {

                $.post("@Url.Content("~/Dealers/GetAllDealer")", null, function (data) { SetProdcutCategory(data, 'DealerList'); }, "Json");
            }
            //$("#DealerList_chosen").show();
        }
        else {

            //$("#DealerList_chosen").hide();
        }
    }
    function SetProdcutCategory(data, id) {
        if (data == "Login") {
            location.href = "@Url.Content("~/Logout/Logout")";
        }
        else if (data == "snotallowed") {
            location.href = "@Url.Content("~/snotallowed/snotallowed")";
        }
        else {
            option = "";
            var procat = $("#" + id);
            procat.empty();
            procat.append("<option value=0 disabled='disabled'>Select</option>");
            $.each(data, function (key, value) {
                option += "<option value=" + value.id + ">" + value.Name + "</option>";

            });
            procat.append(option);
            procat.multiselect({
                nonSelectedText: 'Select Region!',
                includeSelectAllOption: true,
                enableFiltering: true,
                maxHeight: 200,
                buttonWidth: 120,
                enableClickableOptGroups: true,
                enableCollapsibleOptGroups: true
            });
        }

    }



    function SetRegion() {
        $("#RgList").val($("#RegionList").val());
        var regionlist = $("#RgList").val();

        $.post("@Url.Content("~/Dealers/GetDestributorsByMultiPleids")", { RegionId: regionlist }, function (data) { SetProdcutCategory(data, 'DestributorList'); }, "Json");
    }
    function SetDestributor() {
        $("#disList").val($("#DestributorList").val());

        var regionlist = $("#disList").val();

        $.post("@Url.Content("~/Dealers/GetAllDealerByMultiPleIds")", { RegionId: regionlist }, function (data) { SetProdcutCategory(data, 'DealerList'); }, "Json");
    }
    function SetDealer() {
        $("#Dealist").val($("#DealerList").val());
    }

    function a() {
        $("#forms").submit();
    }
</script>
@* End Permisson For *@


<script type="text/javascript">

    $(document).ready(function () {
        $("#btnSubmit").click(function () {
            debugger;           
            if ($("#NotificationText").val() == "") {
                $("#lblmessagesubmit").text("Please fill all the fields");
                return false;
            }

            if ($("#NotificationSubject").val() == "") {
                $("#lblmessagesubmit").text("Please fill all the fields");
                return false;
            }          

            //if ($('#file_headerimage').length == 0 || $('#file_headerimage').val() == '') {
            //    $("#lblmessagesubmit").text("Please fill all the fields");
            //    return false;
            //}

            //if ($('#file_mainimage').length == 0 || $('#file_mainimage').val() == '') {
            //    $("#lblmessagesubmit").text("Please fill all the fields");
            //    return false;
            //}
           
        });

    });

</script>

<div id="page-wrapper" style="background: #f2f4f8;">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="pageHeading"><span></span>Notification</h1>
        </div>
    </div>

    @using (Html.BeginForm("Save", "Notifications", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {

        <div class="row">
            <div class="aos-init aos-animate" data-aos="fade-up" data-aos-duration="2500">
                <div class="addgift" style="padding-bottom: 10px;">
                    <div class="row">
                        @*<div class="col-md-12">
                                <div class="form-group">
                                    <label>Send To<span class="required">*</span></label>
                                    <table class="permissionTbl">
                                        <tr>
                                            <td>All</td>
                                            <td>Region</td>
                                            <td>Distributor</td>
                                            <td>Dealer</td>
                                            <td>Upload User</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <input type="checkbox" name="Alls" onchange="Allst();" id="All" />
                                            </td>
                                            <td>
                                                <select id="RegionList" data-placeholder="Select" onchange="SetRegion();" multiple="multiple" style="color: black;"></select>
                                                <input type="hidden" id="RgList" name="rglist" />
                                            </td>
                                            <td valign="top">
                                                <input type="checkbox" id="checkDistri" name="DistriCheck" />
                                            </td>
                                            <td valign="top">
                                                <input type="checkbox" id="checkDeal" name="DealCheck" />
                                            </td>
                                            <td valign="top">
                                                <input type="file" id="userupload_file" name="userupload_file" style="border:none; " /> <a href="~/Format/UsersFormat.csv">Download Format</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="5">
                                                @Html.ValidationMessageFor(a => a.createdBy, "", new { @class = "required" })
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>*@
                        <div class="col-md-4">
                            <div class="">
                                <label>Subject </label>
                                @Html.TextBoxFor(a => a.C_Subject, new { @class = "form-control", @id = "NotificationSubject" })
                                @*<br />
                                    @Html.ValidationMessageFor(a => a.C_Subject, "", new { @class = "required" })*@
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div class="">
                                <label>Text @*<span class="required">*</span>*@</label>
                                @Html.TextAreaFor(a => a.C_text, 5, 50, new { @class = "form-control", @style = "Width:100%; Height:60px", @id = "NotificationText" })
                                @*<br />
                                    @Html.ValidationMessageFor(a => a.C_text, "", new { @class = "required" })*@
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="">
                                <label>Upload Image</label>
                                <input type="file" name="postedFile" style="border:none; height:inherit;" />
                                <br />
                                <span id="file" class="required"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="">
                                <label>Status</label>
                                <input type="checkbox" checked="checked" name="statusC" style="border:none; height:inherit;" />
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <input type="submit" value="Submit" class="submitBtn" id="btnSubmit" />
                                <label id="lblmessagesubmit" style="font-size: 16px; color:red;"></label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="aos-init aos-animate" data-aos="fade-up" data-aos-duration="2500">
                <div class="addgift" style="padding-bottom: 10px;">
                    <div class="">
                        <div id="list" class="tabelGridRow">
                            <table id="Grid" class="tabelGridRow2" style="width:100%; display:inline-table;">
                                <thead>
                                    <tr>
                                        <th>
                                            ID
                                        </th>
                                        <th>
                                            Subject
                                        </th>
                                        <th>
                                            Text
                                        </th>
                                        <th>
                                            Image
                                        </th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="9">
                                            <div id="Paging"></div>
                                        </td>
                                    </tr>
                                </tfoot>
                            </table>
                            <div style="float:right">
                                @if (Session["Search"] != null)
                                {
                                    @Html.ActionLink("Back", "Index")
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    }

    <div class="space30"></div>
    <div class="row">
        <div class="col-md-12">
            <div class="footerRow">
                © Copyright 2019 LuminousMpartnerIB | All Rights Reserved
            </div>
        </div>
    </div>

</div>