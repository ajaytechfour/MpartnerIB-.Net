@model Luminous.EF.Card_dynamicPage
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_layout.cshtml";
}
<link href="@Url.Content("~/assets/css/Formstyle.css")" rel="stylesheet" type="text/css" />
@*<script src="@Url.Content("~/assets/js/jquery-1.10.2.js")" type="text/javascript"></script>*@
<script src="@Url.Content("~/assets/js/jquery-ui.min.js")" type="text/javascript"></script>
<link href="@Url.Content("~/assets/css/jquery-ui.min.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/chosen.jquery.js")" type="text/javascript"></script>
<link href="@Url.Content("~/assets/css/chosen.css")" rel="stylesheet" type="text/css" />
<style type="text/css">
    .required {
        color: Red;
    }

    table {
        border: 0;
        border-spacing: 0;
        font-size: 0.857em;
        margin: 10px 0;
        width: 100%;
    }

        table table {
            font-size: 1em;
        }

    #footer-wrapper table {
        font-size: 1em;
    }

    table tr th {
        background: #757575;
        background: rgba(0, 0, 0, 0.51);
        border-bottom-style: none;
    }

        table tr th, table tr th a, table tr th a:hover {
            color: #FFF;
            font-weight: bold;
        }

    table tbody tr th {
        vertical-align: top;
    }

    tr td, tr th {
        padding: 4px 9px;
        border: 1px solid #fff;
        text-align: left; /* LTR */
    }

    #footer-wrapper tr td, #footer-wrapper tr th {
        border-color: #555;
        border-color: rgba(255, 255, 255, 0.18);
    }

    tr.odd {
        background: #e4e4e4;
        background: rgba(0, 0, 0, 0.105);
    }

    tr, tr.even {
        background: #efefef;
        background: rgba(0, 0, 0, 0.063);
    }

    table ul.links {
        margin: 0;
        padding: 0;
        font-size: 1em;
    }

        table ul.links li {
            padding: 0 1em 0 0;
        }
</style>
<style>
    .FullDes {
        position: relative;
        background-color: #1D1D1D;
        width: 245px;
        color: white;
        border: 1px solid black;
        display: none;
    }

    button#addRowScroll {
        margin-top: 15px;
        border: none;
        background: #595959;
        color: #fff;
        border-radius: 3px;
        padding: 5px 10px;
    }

    .submitBtn {
        outline: none;
        background: #ffaf38 !important;
        width: 130px;
        font-size: 13px;
        text-transform: uppercase;
        color: #fff;
        border-radius: 5px;
        border: none !important;
        height: 40px !important;
    }
</style>
<script type="text/javascript">
    $(function () {

        $.post("@Url.Content("~/ConnectPlus/GetContactDetail")", null, function (data) { SetGrid(data); }, "Json");
        $.post("@Url.Content("~/ConnectPlus/GetCardProvider")", null, function (data) { SetCardGrid(data); }, "Json");
        $.post("@Url.Content("~/ConnectPlus/GetRedirectPage")", null, function (data) { SetRedirectPage(data); }, "Json");
        @*$.post("@Url.Content("~/Destributor/GetRegions")", null, function (data) { SetProdcutCategory(data, 'RegionList'); },
        "Json");*@
        $(".date").datepicker(
     { dateFormat: "dd-mm-yy" }
        );
        $("#DestributorList").chosen({ width: "100px" });
        $("#DealerList").chosen({ width: "100px" });


        $(".submit").hide();

        $(".banner_cardprovider").hide();
        $(".carddata").hide();
        $(".datetime").hide();
        $(".status").hide();
        $(".Scroll_cardprovider").hide();
        $("#Ctype").change(function () {




            if ($("#Ctype").val() == '16') {
                $("div#dynaTableContent").html("");
                $("#dynaTableContent").show();
                $(".submit").show();
                $(".carddata").show();
                $(".datetime").show();
                $(".status").show();
                $(".Scroll_cardprovider").hide();
                $(".banner_cardprovider").show();

            }
            if ($("#Ctype").val() == '15') {
                $("div#dynaTableContent").html("");
                $("#dynaTableContent").show();
                $(".submit").show();
                $(".carddata").show();
                $(".datetime").show();
                $(".status").show();
                $(".Scroll_cardprovider").show();
                $(".banner_cardprovider").hide();

            }

        })
        ValidationMessage();

    });

</script>
<script type="text/javascript">
    function ValidationMessage() {
        if ('@ViewBag.StartDate' != "") {
            $("#sdate").text('@ViewBag.StartDate');
        }

        if ('@ViewBag.EndDate' != "") {
            $("#edate").text('@ViewBag.EndDate');
        }

        if ('@ViewBag.File' != "") {
            $("#file").text('@ViewBag.File');
        }
        if ('@ViewBag.SaveStatus' != "") {
            alert('@ViewBag.SaveStatus');
            location.href = "@Url.Content("~/ConnectPlus/Index")";
        }
        $("#sdate").val('@ViewBag.preStartDate');
        $("#edate").val('@ViewBag.PreEndDate');
        debugger;
    }
</script>
<script type="text/javascript">


    function SetGrid(data) {
        if (data == "Login") {
            location.href = "@Url.Content("~/Logout/Logout")";
        }
        else if (data == "snotallowed") {
            location.href = "@Url.Content("~/snotallowed/snotallowed")";
        }
        else {
            var body = "";
            $("#Grid tbody").empty();
            $.each(data.result, function (key, value) {

                body += "<tr><td> " + value.id + "</td>" +


                "<td>" + value.CardProvider + "</td>" +
                  "<td>" + value.Title + "</td>" +
                    "<td>" + value.Subtitle + "</td>" +

             "<td>" + value.StartDate + "</td>" +
             "<td>" + value.EndDate + "</td>" +
             "<td>" + value.status + "</td>" +

            "<td style='text-align:right;'><a style='cursor:pointer' onclick=Edit(" + value.id + ");><i class='fas fa-pencil-alt' style='font-size: 13px; color: #737373;'></i></a> <a style='cursor:pointer' onclick=Delete(" + value.id + ");><i class='fas fa-trash-alt' style='font-size:13px; color: #ff6c6c; margin-left: 10px;'></i></a></td></tr>";

            });
            $("#Grid tbody").append(body);
            //SetPages(data.TotalRecord)
            paging();
        }
    }
    //function SetPages(paging) {
    //    var pages = "";
    //    $("#Paging").empty();
    //    for (var i = 1; i <= parseInt(paging) ; i++) {
    //        pages += "<a style='cursor:pointer' onclick=GetPagesValues(" + i + ");> " + i + "  </a>";

    //    }
    //    $("#Paging").append("<u> Pages:-</u>" + pages);
    //}
    @*function GetPagesValues(id) {
        $.post("@Url.Content("~/ConnectPlus/GetContactDetail")", { page: id }, function (data) { SetGrid(data); }, "Json");
    }*@
    function Edit(id) {
        location.href = "@Url.Content("~/ConnectPlus/Edit/")" + id;
    }
    function Delete(id) {
        if (confirm("Do You Want To Delete This Record")) {

            $.post("@Url.Content("~/ConnectPlus/Delete")", { id: id }, function (data) {
                $.post("@Url.Content("~/ConnectPlus/GetContactDetail")", null, function (data) { SetGrid(data); }, "Json");

                alert(data);

            }, "Json");
        }
    }






    //Set Card Grid//
    function SetCardGrid(data) {
        if (data == "Login") {
            location.href = "@Url.Content("~/Logout/Logout")";
        }
        else if (data == "snotallowed") {
            location.href = "@Url.Content("~/snotallowed/snotallowed")";
        }
        else {
            option = "";
            var procat = $("#Ctype");
            procat.empty();
            procat.append("<option value=0>Select</option>");
            $.each(data, function (key, value) {
                option += "<option value=" + value.id + ">" + value.Name + "</option>";

            });
            procat.append(option);
        }
    }

    //Set Card Grid//
    function SetRedirectPage(data) {
        if (data == "Login") {
            location.href = "@Url.Content("~/Logout/Logout")";
        }
        else if (data == "snotallowed") {
            location.href = "@Url.Content("~/snotallowed/snotallowed")";
        }
        else {
            option = "";
            var procat = $(".redirectpage");
            procat.empty();
            procat.append("<option value=0>Select</option>");
            $.each(data, function (key, value) {
                option += "<option value=" + value.id + ">" + value.Name + "</option>";

            });
            procat.append(option);
        }
    }


    $(function () {

        $("#txtsearch").on("keyup", function (event) {

            if (event.which == 8) {

                if ($("#txtsearch").val() == null || $("#txtsearch").val() == 0) {
                    $('#Paging').empty();
                    $.post("@Url.Content("~/ConnectPlus/GetContactDetail")", null, function (data) { SetGrid(data); }, "Json");
                }

            }

            else {
                if ($("#txtsearch").val() != null || $("#txtsearch").val() > 0) {
                    var value = this.value.toLowerCase().trim();

                    $('#Grid tr').each(function (index) {

                        if (!index) return;

                        $(this).find("td").each(function () {

                            var id = $(this).text().toLowerCase().trim();
                            var not_found = (id.indexOf(value) == -1);
                            $(this).closest('tr').toggle(!not_found);
                            return not_found;
                        });

                    });

                }

            }
        });
    });


    function paging() {
        $('#Paging').empty();

        $(document).ready(function () {

            var totalRows = $('#Grid').find('tbody tr:has(td)').length;

            var recordPerPage = 15;
            var numberOfPages = Math.ceil(totalRows / recordPerPage);

            for (var i = 0; i < numberOfPages; i++) {
                var pageNum = i + 1;
                $('#Paging').append('<a href="#" rel="' + i + '">' + pageNum + '</a> ');
            }

            $('#Grid tbody tr').hide();
            $('#Grid tbody tr').slice(0, recordPerPage).show();
            $('#Paging a:first').addClass('active');
            $('#Paging a').bind('click', function () {

                var currentPage = $(this).attr('rel');
                var startitem = currentPage * recordPerPage;
                var enditem = startitem + recordPerPage;

                //$('#Grid tbody tr').hide().slice(startitem, enditem).css('display', 'table-row').animate({ opacity: 1 }, 300);
                $('#Grid tbody tr').hide().slice(startitem, enditem).show();
            });

        });
    }

</script>
<script type="text/javascript">


    $("body").on("click", "#addRow", function (e) {
        e.preventDefault();

        // var str = '<tr><td><input type="text" name="redirectpage_1" value="" /></td><td></td><td>3</td><td>4</td><td>5</td></tr>';

        //$("table#dynaTableContent").append("<tr>" + $(".banner_cardprovider").html() + "</tr>");
        $("div#dynaTableContent").append("<div class='sameRow'>" + $(".banner_cardprovider").html() + "</div>");

    });
    $("body").on("click", "#addRowScroll", function (e) {
        e.preventDefault();

        // var str = '<tr><td><input type="text" name="redirectpage_1" value="" /></td><td></td><td>3</td><td>4</td><td>5</td></tr>';

        //$("table#dynaTableContent").append("<tr>" + $(".Scroll_cardprovider").html() + "</tr>");
        $("div#dynaTableContent").append("<div class='sameRow'>" + $(".Scroll_cardprovider").html() + "</div>");

    });

</script>


<div id="page-wrapper" style="background: #f2f4f8;">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="pageHeading"><span></span>Connect Plus</h1>
        </div>
    </div>

    @using (Html.BeginForm("SaveContact", "ConnectPlus", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {

        <div class="row">
            <div class="aos-init aos-animate" data-aos="fade-up" data-aos-duration="2500">
                <div class="addgift" style="padding-bottom: 10px;">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label> Card Type<span class="required">*</span></label>
                                <select name="Ctype" class="form-control" id="Ctype">
                                    <option>Select</option>
                                </select>
                                @Html.ValidationMessageFor(a => a.CardProviderId, "", new { @class = "required" })
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="aos-init aos-animate banner_cardprovider" data-aos="fade-up" data-aos-duration="2500">
                <div class="addgift" style="padding-bottom: 10px;">
                    <div class="row ">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Redirect Page<span class="required">*</span></label>
                                <select name="redirectpage1" class="redirectpage form-control">
                                    <option>Select</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label> Upload Image<span class="required">*</span></label>
                                <input type="file" name="bannermainimage" style="border:none;" />
                                <i style="font-size:11px; font-style:normal;">(Dimension-500*200 Size- 35kb)</i>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <button id="addRow">Add Row</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="aos-init aos-animate Scroll_cardprovider" data-aos="fade-up" data-aos-duration="2500">
                <div class="addgift" style="padding-bottom: 10px;">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label>Title<span class="required">*</span></label>
                                @Html.TextBoxFor(a => a.Title, new { @class = "form-control" })
                                @Html.ValidationMessageFor(a => a.Title, "", new { @class = "required" })
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label>Redirect Page<span class="required">*</span></label>
                                <select name="redirectpage1" class="redirectpage form-control">
                                    <option>Select</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label>Upload Image<span class="required">*</span></label>
                                <input type="file" name="bannermainimage" style="border:none;" />
                                <i style="font-size:11px; font-style:normal;">(Dimension-500*200 Size- 35kb)</i>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <button id="addRowScroll">Add Row</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="content_wrap">
                <div class="content_main">
                    <div class="boxes1">
                        <div id="dynaTableContent"></div>
                    </div>
                </div>
            </div>


            <div class="aos-init aos-animate datetime" data-aos="fade-up" data-aos-duration="2500" style="float: left; width: 100%;">
                <div class="addgift" style="padding-bottom: 10px;">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label> Start Date<span class="required">*</span></label>
                                <input id="sdate" type="text" class="date form-control" name="StartDate" autocomplete="off" />
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>End Date<span class="required">*</span></label>
                                <input id="edate" type="text" class="date form-control" name="EndDate" autocomplete="off" />
                                @Html.ValidationMessageFor(a => a.Enddate, "", new { @class = "required" })
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Status</label>
                                <input type="checkbox" checked="checked" name="statusC" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group">
                        <input type="submit" value="Submit" class="submit submitBtn" />
                    </div>
                </div>
            </div>




        </div>

    }



    <div class="aos-init aos-animate row">
        <div class="addgift" style="padding-bottom: 10px;">
            <div class="">
                <div style="float:right;margin-right:12px; margin-top: -15px">
                    @*@using (Html.BeginForm("Index", "HomeCard", FormMethod.Post,
                                      new { enctype = "multipart/form-data" }))
                    {*@
                        <table class="headingHd" style="width:100%;">
                            <tr>
                                <th colspan="8" style="font-size: 20px;font-weight: normal;background: none; color: #595959; width: 79%;">Connect Plus Data List</th>
                                <th style="font-weight:normal;position: relative; background: none;  padding: 2px 0 0 0px;  font-size: 13px;">
                                    @Html.TextBox("Search", null, new { Id = "txtsearch", @placeholder = "Search", @style = "padding: 7px 15px; border: 1px solid #eee; border-radius: 3px; color:#595959;" })<img src="images/searchIcon.png" alt="" title="" style="position: absolute;right:12px; top:15px; opacity: 0.2;">
                                    @*<input type="submit" id="btnsearch" value="Search" style="border:none; background: #ffaf38; padding: 7px 18px; border-radius: 5px;" />*@
                                </th>
                            </tr>
                        </table>
                    @*}*@
                </div>
                <div id="list" class="tabelGridRow">
                    <table id="Grid" class="tabelGridRow2" style="width:100%; display:inline-table;">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Card Type</th>
                                <th>Title</th>
                                <th>Sub Title</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                <th>Status</th>
                                <th style="text-align:right;">Action</th>
                            </tr>

                        </thead>
                        <tbody></tbody>

                    </table>
                    <div>
                        Pages :<span id="Paging"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="space30"></div>
    <div class="row">
        <div class="col-md-12">
            <div class="footerRow">
                © Copyright 2019 Luminous | All Rights Reserved
            </div>
        </div>
    </div>
</div>

