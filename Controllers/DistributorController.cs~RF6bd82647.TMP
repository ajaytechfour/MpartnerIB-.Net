using LuminousMpartnerIB.EF;
using LuminousMpartnerIB.Models;
using System;
using System.Collections.Generic;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using TVS;

namespace LuminousMpartnerIB.Controllers
{
    public class DistributorController : Controller
    {
        datautility dut = new datautility();
        DataTable dt = new DataTable();
        DataSet ds = new DataSet();
        LuminousMpartnerIBEntities db;
        List<SideBarMenuModel> sideBarMenuLst = new List<SideBarMenuModel>();

        public DistributorController()
        {
            db = new LuminousMpartnerIBEntities();
        }

        public ActionResult Index()
        {
            if (Session["userid"] == null)
            {
                return RedirectToAction("login", "login");
            }
            else
            {
                var ss = from al in db.AllPages
                         select new SideBarMenuModel
                         {
                             Id = al.Id,
                             PageName = al.PageName,
                             ModuleName = al.ModuleName,
                             RequestType = al.RequestType,
                             RootNode = al.RootNode,
                             IsTopMenu = al.IsTopMenu,
                             Status = al.Status,
                             DisplayOrder = al.DisplayOrder,
                             Image = "/images/" + al.Image
                         };

                ViewData["BalServices"] = ss;


                return View();
            }
        }

    }
}
